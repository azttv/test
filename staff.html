<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>True Vanilla - Staff Panel</title>
    <link rel="icon" type="image/png" href="icons/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root { --bg-dark: #0a0d12; --bg-card: #111827; --accent-aqua: #06b6d4; --accent-aqua-glow: rgba(6, 182, 212, 0.3); --accent-blue: #3b82f6; --accent-green: #10b981; --accent-red: #ef4444; --text-primary: #f1f5f9; --text-secondary: #94a3b8; --text-muted: #64748b; --border-subtle: rgba(255, 255, 255, 0.08); --discord-bg: #36393f; --discord-embed: #2f3136; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg-dark); color: var(--text-primary); min-height: 100vh; }
        .bg-pattern { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; background: radial-gradient(ellipse at 15% 30%, rgba(6, 182, 212, 0.12) 0%, transparent 50%), radial-gradient(ellipse at 85% 70%, rgba(59, 130, 246, 0.08) 0%, transparent 50%); }
        .login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-overlay.hidden { display: none; }
        .login-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 2.5rem; width: 100%; max-width: 400px; }
        .login-logo { text-align: center; margin-bottom: 2rem; }
        .login-logo img { width: 80px; height: 80px; filter: drop-shadow(0 0 15px var(--accent-aqua-glow)); }
        .login-title { font-family: 'Cinzel', serif; font-size: 1.5rem; text-align: center; margin-bottom: 0.5rem; }
        .login-subtitle { text-align: center; color: var(--text-muted); font-size: 0.9rem; margin-bottom: 2rem; }
        .form-group { margin-bottom: 1.25rem; }
        .form-label { display: block; font-size: 0.9rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .form-input { width: 100%; padding: 0.875rem 1rem; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border-subtle); border-radius: 10px; color: var(--text-primary); font-family: 'Outfit', sans-serif; font-size: 1rem; transition: all 0.3s ease; }
        .form-input:focus { outline: none; border-color: var(--accent-aqua); box-shadow: 0 0 0 3px var(--accent-aqua-glow); }
        .login-btn { width: 100%; padding: 1rem; background: linear-gradient(135deg, var(--accent-aqua), var(--accent-blue)); border: none; border-radius: 10px; color: white; font-family: 'Outfit', sans-serif; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .login-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-aqua-glow); }
        .login-error { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); color: #fca5a5; padding: 0.75rem 1rem; border-radius: 8px; font-size: 0.875rem; margin-bottom: 1rem; display: none; }
        .login-error.show { display: block; }
        .main-content { position: relative; z-index: 1; padding: 2rem; max-width: 900px; margin: 0 auto; }
        .page-header { text-align: center; margin-bottom: 2rem; }
        .page-title { font-family: 'Cinzel', serif; font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .page-title span { color: var(--accent-aqua); }
        .page-subtitle { color: var(--text-muted); font-size: 1rem; }
        .user-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; color: var(--accent-aqua); margin-top: 1rem; }
        .announcement-form { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 2rem; }
        .form-section { margin-bottom: 1.5rem; }
        .form-section-title { font-size: 1rem; font-weight: 600; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
        .form-section-title i { color: var(--accent-aqua); }
        .title-input, .description-textarea { width: 100%; padding: 1rem 1.25rem; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border-subtle); border-radius: 10px; color: var(--text-primary); font-family: 'Outfit', sans-serif; font-size: 1rem; transition: all 0.3s ease; }
        .title-input:focus, .description-textarea:focus { outline: none; border-color: var(--accent-aqua); box-shadow: 0 0 0 3px var(--accent-aqua-glow); }
        .description-textarea { min-height: 150px; resize: vertical; line-height: 1.6; }
        .markdown-hint { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem; }
        .markdown-hint code { background: rgba(0, 0, 0, 0.3); padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.75rem; }
        .image-upload-zone { border: 2px dashed var(--border-subtle); border-radius: 12px; padding: 2rem; text-align: center; cursor: pointer; position: relative; transition: all 0.3s ease; }
        .image-upload-zone:hover, .image-upload-zone.dragover { border-color: var(--accent-aqua); background: rgba(6, 182, 212, 0.05); }
        .image-upload-zone input[type="file"] { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
        .upload-icon { font-size: 2.5rem; color: var(--text-muted); margin-bottom: 1rem; }
        .upload-text { color: var(--text-secondary); margin-bottom: 0.5rem; }
        .upload-hint { color: var(--text-muted); font-size: 0.8rem; }
        .image-preview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .image-preview-item { position: relative; aspect-ratio: 16/9; border-radius: 8px; overflow: hidden; background: rgba(0, 0, 0, 0.3); }
        .image-preview-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-remove-btn { position: absolute; top: 8px; right: 8px; width: 28px; height: 28px; background: rgba(239, 68, 68, 0.9); border: none; border-radius: 6px; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .signature-section { display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: rgba(0, 0, 0, 0.2); border-radius: 10px; }
        .checkbox-wrapper input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--accent-aqua); cursor: pointer; }
        .signature-label { color: var(--text-secondary); font-size: 0.95rem; }
        .signature-label strong { color: var(--accent-aqua); }
        .action-buttons { display: flex; gap: 1rem; margin-top: 2rem; }
        .btn-reset { flex: 1; padding: 1rem; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 10px; color: #fca5a5; font-family: 'Outfit', sans-serif; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .btn-reset:hover { background: rgba(239, 68, 68, 0.2); }
        .btn-confirm { flex: 1; padding: 1rem; background: linear-gradient(135deg, var(--accent-green), #059669); border: none; border-radius: 10px; color: white; font-family: 'Outfit', sans-serif; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .btn-confirm:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3); }
        .preview-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); z-index: 5000; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s ease; overflow-y: auto; padding: 2rem; }
        .preview-overlay.active { opacity: 1; visibility: visible; }
        .preview-modal { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; width: 100%; max-width: 700px; max-height: 90vh; overflow-y: auto; transform: scale(0.9); transition: all 0.3s ease; }
        .preview-overlay.active .preview-modal { transform: scale(1); }
        .preview-header { display: flex; align-items: center; justify-content: space-between; padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border-subtle); position: sticky; top: 0; background: var(--bg-card); }
        .preview-title { font-family: 'Cinzel', serif; font-size: 1.25rem; font-weight: 600; }
        .preview-close { width: 36px; height: 36px; border: none; background: rgba(255, 255, 255, 0.05); border-radius: 8px; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .preview-content { padding: 1.5rem; }
        .discord-preview { background: var(--discord-bg); border-radius: 8px; padding: 1rem; }
        .discord-message { display: flex; gap: 1rem; }
        .discord-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-aqua), var(--accent-blue)); flex-shrink: 0; }
        .discord-body { flex: 1; }
        .discord-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
        .discord-username { font-weight: 600; color: var(--accent-aqua); }
        .discord-timestamp { font-size: 0.75rem; color: var(--text-muted); }
        .discord-embed { background: transparent; padding: 0; margin-top: 0.25rem; }
        .discord-message-text { color: var(--text-primary); font-size: 0.95rem; line-height: 1.5; white-space: pre-wrap; }
        .discord-message-text .mention { background: rgba(88, 101, 242, 0.3); color: #c9cdfb; padding: 0 2px; border-radius: 3px; }
        .discord-message-text .heading { font-size: 1.5rem; font-weight: 700; margin: 0.25rem 0; display: block; }
        .discord-message-text .signature { font-style: italic; color: var(--text-muted); }
        .discord-embed-images { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-top: 0.75rem; }
        .discord-embed-images.single { grid-template-columns: 1fr; }
        .discord-embed-images img { width: 100%; border-radius: 4px; max-height: 200px; object-fit: cover; }
        .channel-selection { padding: 1.5rem; border-top: 1px solid var(--border-subtle); }
        .channel-label { font-size: 0.9rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 1rem; text-align: center; }
        .channel-buttons { display: flex; gap: 1rem; }
        .channel-btn { flex: 1; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-subtle); border-radius: 10px; color: var(--text-secondary); font-family: 'Outfit', sans-serif; font-size: 0.95rem; font-weight: 500; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 0.5rem; transition: all 0.3s ease; }
        .channel-btn i { font-size: 1.5rem; }
        .channel-btn:hover { background: rgba(6, 182, 212, 0.1); border-color: var(--accent-aqua); color: var(--text-primary); }
        .channel-btn.selected { background: rgba(6, 182, 212, 0.15); border-color: var(--accent-aqua); color: var(--accent-aqua); }
        .channel-btn.vip i { color: #fbbf24; }
        .channel-btn.general i { color: var(--accent-aqua); }
        .channel-note { font-size: 0.85rem; color: var(--text-muted); text-align: center; margin-top: 1rem; padding: 0.75rem; background: rgba(6, 182, 212, 0.1); border-radius: 8px; }
        .send-section { padding: 0 1.5rem 1.5rem; }
        .btn-send { width: 100%; padding: 1.25rem; background: linear-gradient(135deg, var(--accent-aqua), var(--accent-blue)); border: none; border-radius: 12px; color: white; font-family: 'Outfit', sans-serif; font-size: 1.1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.75rem; transition: all 0.3s ease; }
        .btn-send:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 30px var(--accent-aqua-glow); }
        .btn-send:disabled { opacity: 0.5; cursor: not-allowed; }
        .success-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 6000; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .success-overlay.active { opacity: 1; visibility: visible; }
        .success-icon { width: 100px; height: 100px; background: rgba(16, 185, 129, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; }
        .success-icon i { font-size: 3rem; color: var(--accent-green); }
        .success-title { font-family: 'Cinzel', serif; font-size: 1.75rem; margin-bottom: 0.5rem; }
        .success-subtitle { color: var(--text-muted); font-size: 1rem; }
        .redirect-countdown { margin-top: 2rem; color: var(--text-secondary); font-size: 0.9rem; }
        .redirect-countdown span { color: var(--accent-aqua); font-weight: 600; }
        @media (max-width: 600px) { .main-content { padding: 1rem; } .announcement-form { padding: 1.25rem; } .action-buttons, .channel-buttons { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div class="login-overlay" id="loginOverlay">
        <div class="login-card">
            <div class="login-logo"><img src="icons/logo.png" alt="True Vanilla"></div>
            <h1 class="login-title">Panneau Staff</h1>
            <p class="login-subtitle">Connectez-vous pour publier des annonces</p>
            <div class="login-error" id="loginError"><i class="fas fa-exclamation-circle"></i> Identifiants incorrects</div>
            <form id="loginForm">
                <div class="form-group"><label class="form-label">Nom d'utilisateur</label><input type="text" class="form-input" id="username" autocomplete="off" required></div>
                <div class="form-group"><label class="form-label">Mot de passe</label><input type="password" class="form-input" id="password" required></div>
                <button type="submit" class="login-btn"><i class="fas fa-sign-in-alt"></i> Se connecter</button>
            </form>
        </div>
    </div>
    <div class="main-content" id="mainContent" style="display: none;">
        <div class="page-header">
            <h1 class="page-title">Créer une <span>Annonce</span></h1>
            <p class="page-subtitle">Publiez une annonce sur Discord (elle apparaîtra automatiquement sur le site)</p>
            <div class="user-badge"><i class="fas fa-user-shield"></i><span id="loggedUsername">-</span></div>
        </div>
        <div class="announcement-form">
            <div class="form-section"><div class="form-section-title"><i class="fas fa-heading"></i> Titre</div><input type="text" class="title-input" id="announcementTitle" placeholder="Titre de l'annonce..." maxlength="100"></div>
            <div class="form-section"><div class="form-section-title"><i class="fas fa-align-left"></i> Description</div><textarea class="description-textarea" id="announcementDescription" placeholder="Description de l'annonce..."></textarea><p class="markdown-hint">Markdown: <code>**gras**</code> <code>*italique*</code> <code>__souligné__</code> <code>~~barré~~</code></p></div>
            <div class="form-section"><div class="form-section-title"><i class="fas fa-images"></i> Images (4 max)</div><div class="image-upload-zone" id="uploadZone"><input type="file" id="imageInput" accept="image/*" multiple><div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div><p class="upload-text">Glissez, cliquez ou collez</p><p class="upload-hint">PNG, JPG, GIF (50MB max)</p></div><div class="image-preview-grid" id="imagePreviewGrid"></div></div>
            <div class="form-section"><div class="form-section-title"><i class="fas fa-signature"></i> Signature</div><div class="signature-section"><div class="checkbox-wrapper"><input type="checkbox" id="signatureCheckbox"></div><label class="signature-label" for="signatureCheckbox">Signer en tant que <strong id="signatureName">-</strong></label></div></div>
            <div class="action-buttons"><button class="btn-reset" id="btnReset"><i class="fas fa-undo"></i> Réinitialiser</button><button class="btn-confirm" id="btnConfirm"><i class="fas fa-eye"></i> Aperçu</button></div>
        </div>
    </div>
    <div class="preview-overlay" id="previewOverlay">
        <div class="preview-modal">
            <div class="preview-header"><h2 class="preview-title">Aperçu Discord</h2><button class="preview-close" id="previewClose"><i class="fas fa-times"></i></button></div>
            <div class="preview-content"><div class="discord-preview"><div class="discord-message"><div class="discord-avatar"></div><div class="discord-body"><div class="discord-header"><span class="discord-username">True Vanilla</span><span class="discord-timestamp">Aujourd'hui à <span id="previewTime">--:--</span></span></div><div class="discord-embed"><div class="discord-message-text" id="previewMessageText"></div><div class="discord-embed-images" id="previewImages"></div></div></div></div></div></div>
            <div class="channel-selection"><p class="channel-label">Canal de diffusion :</p><div class="channel-buttons"><button class="channel-btn vip" id="btnVip"><i class="fas fa-crown"></i><span>VIP</span></button><button class="channel-btn general" id="btnGeneral"><i class="fas fa-bullhorn"></i><span>Général</span></button></div><p class="channel-note"><i class="fas fa-info-circle"></i> Les annonces générales apparaissent automatiquement sur le site via le bot Discord</p></div>
            <div class="send-section"><button class="btn-send" id="btnSend" disabled><i class="fas fa-paper-plane"></i> Envoyer sur Discord</button></div>
        </div>
    </div>
    <div class="success-overlay" id="successOverlay"><div class="success-icon"><i class="fas fa-check"></i></div><h2 class="success-title">Annonce publiée !</h2><p class="success-subtitle">Elle apparaîtra sur le site automatiquement</p><p class="redirect-countdown">Redirection dans <span id="countdown">5</span>s</p></div>
    <script>
        const _0x4f2a = ['\x61\x7a\x5f\x74\x74\x76', '\x41\x73\x6f\x6c\x6b\x61'];
        const _0x3b1c = atob('VHJ1ZXN0QGZmY2gy');
        const validUsers = { [_0x4f2a[0]]: _0x3b1c, [_0x4f2a[1]]: _0x3b1c };
        const webhooks = { vip: 'https://discord.com/api/webhooks/1436719755578052668/BmHB4Dc40iM9eD9mFc3o7dJZ12pGo9rSH-LEweteHLZII84ncSjh9Sy2M4TNsQv01627', general: 'https://discord.com/api/webhooks/1431983410179604642/89zUIzYTwJJJx9qm1sGbra0uI7uOFcNOqAaK0XW1ivChbY8ntRPr0woEK3JA8sY1shyw' };
        let currentUser = null, uploadedImages = [], selectedChannel = null;
        const $ = id => document.getElementById(id);
        $('loginForm').addEventListener('submit', e => { e.preventDefault(); const u = $('username').value.trim(), p = $('password').value; if (validUsers[u] === p) { currentUser = u; $('loginOverlay').classList.add('hidden'); $('mainContent').style.display = 'block'; $('loggedUsername').textContent = u; $('signatureName').textContent = u; } else { $('loginError').classList.add('show'); setTimeout(() => location.href = 'index.html', 1500); } });
        $('uploadZone').addEventListener('dragover', e => { e.preventDefault(); $('uploadZone').classList.add('dragover'); });
        $('uploadZone').addEventListener('dragleave', () => $('uploadZone').classList.remove('dragover'));
        $('uploadZone').addEventListener('drop', e => { e.preventDefault(); $('uploadZone').classList.remove('dragover'); handleFiles(e.dataTransfer.files); });
        $('imageInput').addEventListener('change', e => handleFiles(e.target.files));
        document.addEventListener('paste', e => { if ($('mainContent').style.display !== 'none') for (let i of e.clipboardData.items) if (i.type.startsWith('image/')) handleFiles([i.getAsFile()]); });
        function handleFiles(files) { for (let f of files) { if (uploadedImages.length >= 4) break; if (f.size > 50*1024*1024 || !f.type.startsWith('image/')) continue; const r = new FileReader(); r.onload = e => { uploadedImages.push({data: e.target.result, name: f.name}); renderPreviews(); }; r.readAsDataURL(f); } }
        function renderPreviews() { $('imagePreviewGrid').innerHTML = uploadedImages.map((img, i) => `<div class="image-preview-item"><img src="${img.data}"><button class="image-remove-btn" onclick="uploadedImages.splice(${i},1);renderPreviews()"><i class="fas fa-times"></i></button></div>`).join(''); }
        $('btnReset').onclick = () => { $('announcementTitle').value = ''; $('announcementDescription').value = ''; uploadedImages = []; $('imagePreviewGrid').innerHTML = ''; $('signatureCheckbox').checked = false; };
        $('btnConfirm').onclick = () => { if (!$('announcementTitle').value.trim() || !$('announcementDescription').value.trim()) return alert('Remplissez le titre et la description'); $('previewTime').textContent = new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}); const title = $('announcementTitle').value.trim(); const desc = $('announcementDescription').value.trim(); const sig = $('signatureCheckbox').checked ? currentUser : "l'Équipe True Vanilla"; $('previewMessageText').innerHTML = `<span class="mention">@everyone</span>\n<span class="heading"># ${title}</span>\n\n${desc}\n\n<span class="signature">*- ${sig}*</span>`; $('previewImages').innerHTML = uploadedImages.length ? uploadedImages.map(i => `<img src="${i.data}">`).join('') : ''; $('previewImages').className = 'discord-embed-images' + (uploadedImages.length === 1 ? ' single' : ''); selectedChannel = null; $('btnVip').classList.remove('selected'); $('btnGeneral').classList.remove('selected'); $('btnSend').disabled = true; $('previewOverlay').classList.add('active'); };
        $('previewClose').onclick = () => $('previewOverlay').classList.remove('active');
        $('previewOverlay').onclick = e => { if (e.target === $('previewOverlay')) $('previewOverlay').classList.remove('active'); };
        $('btnVip').onclick = () => { selectedChannel = 'vip'; $('btnVip').classList.add('selected'); $('btnGeneral').classList.remove('selected'); $('btnSend').disabled = false; };
        $('btnGeneral').onclick = () => { selectedChannel = 'general'; $('btnGeneral').classList.add('selected'); $('btnVip').classList.remove('selected'); $('btnSend').disabled = false; };
        $('btnSend').onclick = async () => { if (!selectedChannel) return; $('btnSend').disabled = true; $('btnSend').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi...'; const sig = $('signatureCheckbox').checked ? currentUser : "l'Équipe True Vanilla"; const title = $('announcementTitle').value.trim(); const desc = $('announcementDescription').value.trim(); const messageContent = `||@everyone||\n# ${title}\n\n${desc}\n\n*- ${sig}*`; try { if (uploadedImages.length) { const fd = new FormData(); fd.append('payload_json', JSON.stringify({content: messageContent})); for (let i=0; i<uploadedImages.length; i++) { const b = await fetch(uploadedImages[i].data).then(r=>r.blob()); fd.append(`file${i}`, b, uploadedImages[i].name||`img${i}.png`); } await fetch(webhooks[selectedChannel], {method:'POST', body:fd}); } else await fetch(webhooks[selectedChannel], {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({content: messageContent})}); $('previewOverlay').classList.remove('active'); $('successOverlay').classList.add('active'); let c=5; const iv=setInterval(()=>{c--;$('countdown').textContent=c;if(c<=0){clearInterval(iv);location.href='index.html';}},1000); } catch(e) { alert('Erreur: '+e.message); $('btnSend').disabled=false; $('btnSend').innerHTML='<i class="fas fa-paper-plane"></i> Envoyer'; } };
        document.addEventListener('keydown', e => { if (e.key === 'Escape') $('previewOverlay').classList.remove('active'); });
    </script>
</body>
</html>
